---
title: 脚手架物语
date: 2022-11-27 00:10:55
tags:
---

# 脚手架物语

很多时候我地都要使用一滴类似脚手架啊，插件啊之类这些东西来提取代码并执行。那么这些东西是怎么搞出来的呢？现在我就写个手册教你搞~

首先，先创个目录
```
pnpm init
```
得到package.json

新建cli.js入口文件并挂载入口

```
{
  "name": "ponda",
  "version": "1.0.0",
  "description": "",
  "main": "cli.js",
  "bin": "cli.js", // 挂载入口
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC"
}

```

我们要跟用户做交流对吧？

```
pnpm install inquirer -D
```

把用户输入的参数放入模板中

```
pnpm install ejs -S
```

自定义命令行指令
```
pnpm install commander -S
```
命令行询问用户问题，记录回答结果
```
pnpm install inquirer -S
```
控制台输出内容样式美化
```
pnpm install chalk -S
```
控制台 loading 样式
```
pnpm install ora -S
```
控制台打印 logo
```
pnpm install figlet -S
```
控制台输出表格
```
pnpm install easy-table -S
```
下载远程模版
```
pnpm install download-git-repo -S
```
系统fs模块的扩展，提供了更多便利的 API，并继承了fs模块的 API
```
pnpm install fs-extra -S
```
支持跨平台调用系统上的命令
```
pnpm install cross-spawn -S
```
全部指令
```
pnpm add commander inquirer chalk ora figlet easy-table download-git-repo fs-extra cross-spawn
```

接下来用一个实例来证明我是最强的！
```js
// cli.js
#! /usr/bin/env node


const program = require('commander')

program
  // 定义命令和参数
  .command('create <app-name>')
  .description('create a new project')
  // -f or --force 为强制创建，如果创建的目录存在则直接覆盖
  .option('-f, --force', 'overwrite target directory if it exist')
  .action((name, options) => {
    // 打印执行结果
    console.log('name:',name,'options:',options)
  })
  
program
   // 配置版本号信息
  .version(`v${require('../package.json').version}`)
  .usage('<command> [option]')
  
// 解析用户执行命令传入参数
program.parse(process.argv);

```
新建个lib文件夹来存具体命令要做的事情

```js
// ./lib/create.js

```