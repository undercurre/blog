---
title: æ¨¡æ¿å»ºæˆè®°
date: 2022-11-16 00:02:40
tags:
---

è®²ä¸ªç¬‘è¯ï¼šæˆ‘ä»¥å‰ä»¥ä¸ºæ¨¡æ¿å°±æ˜¯æ¡†æ¶

# æ¨¡æ¿

ç®€å•ç‚¹è¯´ï¼Œå°±æ˜¯å¼€å‘çš„æ—¶å€™ä¸€å¤§å †å·¥å…·çš„é›†æˆä½“ï¼Œç›¸å½“äºå·¥å…·ç®±å’¯ï¼

å¥½å•¦ï¼ç­‰æˆ‘åœ°å“©ç»„è£…è‡ªå·±çš„å·¥å…·ç®±å•¦ï¼

## init a project
é€‰ä¸ªpnpmåšåŒ…ç®¡ç†å•¦æ¢—ç³»ï¼å› ä¸ºä¸€é˜µè¦ç”¨vueæ‰€ä»¥é€‰viteåšæ‰“åŒ…å·¥å…·
```
pnpm create vite
// ç„¶åè·Ÿç€æŒ‡å¼•é€‰vueï¼Œtypescript

// æ¡†æ¶è¢«å»ºå‡ºæ¥ä¹‹åä½ ä¼šè·å¾—ä¸€ä¸ªç”±vueå’Œtypescriptå»ºæˆçš„æœ€åˆæ¨¡æ¿ï¼ˆå¹²å‡€çš„ä¸€ç¬”ï¼‰
pnpm i
pnpm dev
// å‡ºæ¥ä¸€ä¸ªvueçš„æ¨¡æ¿é¡µé¢
```

## é›†æˆï¼ˆpresets/presets.tsï¼‰
### ä¿è¯vueçš„è¿è¡Œ(æ”¯æŒvueæ¨¡æ¿çš„è¯†åˆ«ä¸ç¼–è¯‘)
```
pnpm add @vitejs/plugin-vue @vitejs/plugin-vue-jsx -D
```
```ts
import vue from '@vitejs/plugin-vue';
import vueJsx from '@vitejs/plugin-vue-jsx';

export default [
    vue(),
    vueJsx(),
]
```
### add css
åŸå­åŒ–css unocss
```
pnpm add unocss -D
```

```ts
// presets/presets.ts
import Unocss from 'unocss/vite'

export default [
    Unocss(),
]
```

```ts
// main.ts
import 'uno.css'
```
### è‡ªåŠ¨å¼•å…¥æ’ä»¶
```
pnpm add unplugin-auto-import -D
```
```ts
import AutoImport from 'unplugin-auto-import/vite';

export default [
    AutoImport({
        include: [ // æ‰«æèŒƒå›´
            /\.[tj]sx?$/, // .ts, .tsx, .js, .jsx
            /\.vue$/, /\.vue\?vue/, // .vue
            /\.md$/, // .md
        ],
        imports: [ // ä½ éœ€è¦è‡ªåŠ¨å¼•å…¥ä»€ä¹ˆæ’ä»¶
            'vue'
        ],
        dts: './src/types/auto-imports.d.ts', // è¦ç”Ÿæˆç›¸åº”çš„ç±»ï¼Œä¸ç„¶è¿‡ä¸äº†ts
    })
]
```
### è‡ªåŠ¨å¼•å…¥ç»„ä»¶
```
npm install unplugin-vue-components -D
npm install vite-plugin-style-import -D
```
```ts
import Components from 'unplugin-vue-components/vite';
import { VantResolver, NaiveUiResolver } from 'unplugin-vue-components/resolvers';
import {
  createStyleImportPlugin,
  VantResolve
} from 'vite-plugin-style-import'


export default [
    Components({
        dirs: ['src/components/'], // æˆ‘åœ°æ»´ç»„ä»¶è‚¯å®šå†™å¯å“©åˆ°è‘›å˜›
        extensions: ['vue'], //  // ç»„ä»¶çš„æœ‰æ•ˆæ–‡ä»¶æ‰©å±•å
        include:[/\.vue$/, /\.vue\?vue/], // æ‰«æèŒƒå›´
        resolvers: [
            VantResolver(), // ç§»åŠ¨uiåº“
            NaiveUiResolver(), // PCç«¯UIåº“
        ], // uiåº“è§£æå™¨
        dts: './src/types/components.d.ts', // è¦ç”Ÿæˆç›¸åº”çš„ç±»ï¼Œä¸ç„¶è¿‡ä¸äº†tsï¼Œåœ¨srcä¸‹å»ºtypesæ–‡ä»¶å¤¹
    }),
    createStyleImportPlugin({
      resolves: [
        VantResolve()
      ],
    }),
]
```

### å›¾æ ‡åº“
```
pnpm add -D @iconify/json
```
```ts
import Icons from 'unplugin-icons/vite'
import IconsResolver from 'unplugin-icons/resolver'
import { FileSystemIconLoader } from 'unplugin-icons/loaders';

export default [
    Components({
        resolvers: [
            IconsResolver({ customCollections: ['custom'] }),
        ]
    }),
    Icons({
        compiler: 'vue3', // é€‚åº”vue3ä¾èµ–
        customCollections: {
          custom: FileSystemIconLoader('./assets/svg'), // è‡ªå®šä¹‰ç›®å½•
        },
        autoInstall: true, // è‡ªåŠ¨å®‰è£…
    }),
]
```
```vue
  <i-mdi-account-box />
  <i-mdi-alarm-off />
```

### å­—ä½“åº“
```
pnpm add vite-plugin-fonts -D
```

```ts
import ViteFonts from 'vite-plugin-fonts';

export default [
    ViteFonts({
      google: {
        families: ['Open Sans', 'Montserrat', 'Fira Sans'],
      },
    }),
]
```

### å›½é™…åŒ–
```
pnpm add @intlify/vite-plugin-vue-i18n -D
```

```ts
import VueI18n from '@intlify/vite-plugin-vue-i18n';

export default [
    VueI18n({
        include: ['../src/locales/'], // ç¿»è¯‘ç›®å½•,åœ¨srcä¸‹æ–°å»ºlocalesæ–‡ä»¶å¤¹
    }),
]
```

```ts
// main.ts
import { createI18n } from 'vue-i18n'

import en from './locales/en.json'
import zh from './locales/zh-CN.json'

const i18n = createI18n({
    locale: 'zh',
    messages: {
      en,
      zh
    }
})

app.use(i18n)
```
```json
{
  "language": "English"
}
```
```json
{
  "language": "ä¸­æ–‡"
}
```
```vue
 <div>{{ $t('language') }}</div>
```

## è§„èŒƒåŒ–
### ESLintï¼ˆè§„èŒƒè¯­æ³•ï¼‰
```
pnpm i -D eslint
npx eslint --init
ä¸Šé¢çš„åˆå§‹åŒ–ä¼šæç¤ºä½ ä¸‹è½½ä¸‹é¢è¿™äº›
pnpm i eslint eslint-plugin-vue --save-dev
ç”±äº ESLint é»˜è®¤æ— æ³•è¯†åˆ« TypeScriptï¼Œéœ€è¦å®‰è£… @typescript-eslint/parser æ›¿ä»£æ‰é»˜è®¤çš„è§£æå™¨ã€‚
pnpm install @typescript-eslint/parser --save-dev
å®‰è£… @typescript-eslint/eslint-plugin ä½œä¸º eslint é»˜è®¤è§„åˆ™çš„è¡¥å……ï¼Œæä¾›äº†é€‚ç”¨äº ts è¯­æ³•çš„è§„åˆ™ã€‚
pnpm install @typescript-eslint/eslint-plugin --save-dev
```
æœ€ååœ¨package.jsonä¸­æ·»åŠ å‘½ä»¤
```json
"eslint:comment": "ä½¿ç”¨ ESLint æ£€æŸ¥å¹¶è‡ªåŠ¨ä¿®å¤ src ç›®å½•ä¸‹æ‰€æœ‰æ‰©å±•åä¸º .js å’Œ .vue çš„æ–‡ä»¶",
"eslint": "eslint --ext .js,.vue --ignore-path .gitignore --fix src"
```

```.eslintrc.cjs 
    // é…ç½®vue3ã€ts
    "parser": "vue-eslint-parser",
    "parserOptions": {
        "parser": "@typescript-eslint/parser",
    },
```
### Prettierï¼ˆè§„èŒƒæ ¼å¼ï¼‰
```
pnpm i prettier eslint-config-prettier eslint-plugin-prettier --save-dev
```
åœ¨æ ¹ç›®å½•æ–°å»º.prettierrc.js
```package.json
  "prettier:comment": "è‡ªåŠ¨æ ¼å¼åŒ–å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶",
  "prettier": "prettier --write"
```

### è§£å†³eslintä¸prettierçš„å†²çª

eslint-plugin-prettierï¼š åŸºäº prettier ä»£ç é£æ ¼çš„ eslint è§„åˆ™ï¼Œå³eslintä½¿ç”¨pretterè§„åˆ™æ¥æ ¼å¼åŒ–ä»£ç ã€‚
eslint-config-prettierï¼š ç¦ç”¨æ‰€æœ‰ä¸æ ¼å¼ç›¸å…³çš„ eslint è§„åˆ™ï¼Œè§£å†³ prettier ä¸ eslint è§„åˆ™å†²çªï¼Œç¡®ä¿å°†å…¶æ”¾åœ¨ extends é˜Ÿåˆ—æœ€åï¼Œè¿™æ ·å®ƒå°†è¦†ç›–å…¶ä»–é…ç½®

```
pnpm add eslint-config-prettier eslint-plugin-prettier -D
```

```.eslintrc.cjs 
   { 
    extends: [
      'eslint:recommended',
      'plugin:vue/vue3-essential',
      'plugin:@typescript-eslint/recommended',
  +    // æ–°å¢ï¼Œå¿…é¡»æ”¾åœ¨æœ€åé¢
  +   'plugin:prettier/recommended' 
    ],
  }
```

### lint-staged
lint-stagedèƒ½å¤Ÿè®©lintåªæ£€æµ‹æš‚å­˜åŒºçš„æ–‡ä»¶ï¼Œæ‰€ä»¥é€Ÿåº¦å¾ˆå¿«ã€‚
```
pnpm add lint-staged -D
```


### stylelintï¼ˆè§„èŒƒcssï¼‰

```
pnpm add stylelint postcss postcss-less postcss-html stylelint-config-prettier stylelint-config-recommended-scss stylelint-config-standard stylelint-config-standard-vue stylelint-scss stylelint-order -D
```
```package.json
"stylelint": "stylelint \"./**/*.{css,less,vue,html}\" --fix"
```

### huskyï¼ˆè§„èŒƒæäº¤ï¼‰

```
pnpm add husky -D
```
```package.json
"prepare": "husky install"
```
```
pnpm husky add .husky/pre-commit "pnpm lint && pnpm format && pnpm lint:style"
```
è¯¥å‘½ä»¤ä¼šåœ¨pnpm installä¹‹åè¿è¡Œï¼Œè¿™æ ·å…¶ä»–å…‹éš†è¯¥é¡¹ç›®çš„åŒå­¦å°±åœ¨è£…åŒ…çš„æ—¶å€™å°±ä¼šè‡ªåŠ¨æ‰§è¡Œè¯¥å‘½ä»¤æ¥å®‰è£…huskyã€‚

### commitlintå’Œcommitizen(æäº¤è§„èŒƒ)
commitlintè§„èŒƒæäº¤æ’ä»¶
@commitlint/config-conventional å…±äº«æäº¤é…ç½®å¼ºåˆ¶å¸¸è§„æäº¤
commitlint-config-czç›¸å…³é…ç½®
cz-customizableè‡ªå®šä¹‰é…ç½®

```
pnpm i commitlint @commitlint/config-conventional -D
npm set-script commit "git add . && git-cz"
npx commitizen init cz-conventional-changelog --save-dev --save-exact
pnpm i -D commitlint-config-cz  cz-customizable
```
æ ¹ç›®å½•æ–°å»ºcommitlint.config.jså’Œcz-config.js
```commitlint.config.js
module.exports = {
    extends:  ['cz'],
    rules: {
        // è‡ªå®šä¹‰è§„åˆ™
    }
}
```
```cz-config.js
'use strict'
module.exports = {
  types: [
    { value: 'âœ¨æ–°å¢', name: 'æ–°å¢:    æ–°çš„å†…å®¹' },
    { value: 'ğŸ›ä¿®å¤', name: 'ä¿®å¤:    ä¿®å¤ä¸€ä¸ªBug' },
    { value: 'ğŸ“æ–‡æ¡£', name: 'æ–‡æ¡£:    å˜æ›´çš„åªæœ‰æ–‡æ¡£' },
    { value: 'ğŸ’„æ ¼å¼', name: 'æ ¼å¼:    ç©ºæ ¼, åˆ†å·ç­‰æ ¼å¼ä¿®å¤' },
    { value: 'â™»ï¸é‡æ„', name: 'é‡æ„:    ä»£ç é‡æ„ï¼Œæ³¨æ„å’Œç‰¹æ€§ã€ä¿®å¤åŒºåˆ†å¼€' },
    { value: 'âš¡ï¸æ€§èƒ½', name: 'æ€§èƒ½:    æå‡æ€§èƒ½' },
    { value: 'âœ…æµ‹è¯•', name: 'æµ‹è¯•:    æ·»åŠ ä¸€ä¸ªæµ‹è¯•' },
    { value: 'ğŸ”§å·¥å…·', name: 'å·¥å…·:    å¼€å‘å·¥å…·å˜åŠ¨(æ„å»ºã€è„šæ‰‹æ¶å·¥å…·ç­‰)' },
    { value: 'âªå›æ»š', name: 'å›æ»š:    ä»£ç å›é€€' }
  ],
  scopes: [
    { name: 'leetcode' },
    { name: 'javascript' },
    { name: 'typescript' },
    { name: 'Vue' },
    { name: 'node' }
  ],
  // it needs to match the value for field type. Eg.: 'fix'
  /*  scopeOverrides: {
    fix: [
      {name: 'merge'},
      {name: 'style'},
      {name: 'e2eTest'},
      {name: 'unitTest'}
    ]
  },  */
  // override the messages, defaults are as follows
  messages: {
    type: 'é€‰æ‹©ä¸€ç§ä½ çš„æäº¤ç±»å‹:',
    scope: 'é€‰æ‹©ä¸€ä¸ªscope (å¯é€‰):',
    // used if allowCustomScopes is true
    customScope: 'Denote the SCOPE of this change:',
    subject: 'çŸ­è¯´æ˜:\n',
    body: 'é•¿è¯´æ˜ï¼Œä½¿ç”¨"|"æ¢è¡Œ(å¯é€‰)ï¼š\n',
    breaking: 'éå…¼å®¹æ€§è¯´æ˜ (å¯é€‰):\n',
    footer: 'å…³è”å…³é—­çš„issueï¼Œä¾‹å¦‚ï¼š#31, #34(å¯é€‰):\n',
    confirmCommit: 'ç¡®å®šæäº¤è¯´æ˜?(yes/no)'
  },
  allowCustomScopes: true,
  allowBreakingChanges: ['ç‰¹æ€§', 'ä¿®å¤'],
  // limit subject length
  subjectLimit: 100
}
```

```package.json
  // package.json
    "config": {
        "commitizen": {
            "path": "node_modules/cz-customizable"
        }
    }
```
### changeLog And version(ä½¿ç”¨conventional-changelog-cliå’Œstandard-version)
```
// ä¸‹è½½
npm install -s conventional-changelog-cli

// é…ç½® package.json
"scripts": {
    "changelog": "conventional-changelog -p angular -i CHANGELOG.md -s -r 0"
}
```
```
// ä¸‹è½½
npm install --save-dev standard-version

// é…ç½® package.json
"scripts": {
    "release": "standard-version"
}
```
## åŠŸèƒ½æ’ä»¶

### piniaå¤§è è
```
 pnpm i pinia --save
```
æ–°å»ºsrc/store/index.ts
```
Â import { createPinia } from 'pinia'

Â const store = createPinia()

Â export default store
```
åœ¨main.tsä¸­å¼•å…¥å’ŒæŒ‚è½½
```
  import store from './store'
  // æŒ‚è½½pinia
Â  app.use(store)
```

### vue-router
```
pnpm i vue-router --save
```
æ–°å»ºsrc/router/index.ts
```
Â import { createRouter, createWebHistory, RouteRecordRaw } from 'vue-router';

Â const routes: Array<RouteRecordRaw> = [
Â   {
Â  Â  Â  Â path: '/',
Â  Â  Â  Â name: 'Index',
Â  Â  Â  Â meta: {
Â  Â  Â  Â  Â  Â title: 'é¦–é¡µ',
Â  Â  Â  Â  Â  Â keepAlive: true,
Â  Â  Â  Â  Â  Â requireAuth: true
Â  Â  Â   },
Â  Â  Â  Â component: () => import('@/view/index.vue')
Â   }
Â ]

Â const router = createRouter({
Â  Â history: createWebHistory(),
Â  Â routes
Â });
Â export default router;
```
åœ¨mainä¸­å¼•å…¥å’ŒæŒ‚è½½
```
import router from './router';
app.use(router);
```
åœ¨App.vueä¸­ä½¿ç”¨
```
 <template>
   <RouterView/>
 </template>
 ```
### vue-use
å®ƒæ˜¯ä¸€ä¸ªåŸºäº Composition API çš„å®ç”¨å‡½æ•°é›†åˆ
```
 pnpm i @vueuse/core
```
### axios
```
pnpm i axios
```
å°è£…

è¿™é‡Œå°±ä¸å¾—ä¸è¯´è¯´å°è£…çš„æ„ä¹‰ï¼šæˆ‘ä»¬å…ˆè¯´è¯´å¦‚æœä¸å°è£…ä¼šæ€ä¹ˆæ ·ï¼Ÿæ²¡æœ‰æ‹¦æˆªå™¨ï¼Œæ¯æ¬¡éœ€è¦å¯¹å‚æ•°ã€ç”¨æˆ·æ ‡è¯†è¿›è¡Œä¿®æ”¹æ—¶å°±è¦å†™ä¸€æ¬¡ï¼Œæ‰€ä»¥å°è£…èƒ½å¤Ÿæå¤§æé«˜ä»£ç çš„å¤ç”¨æ€§ã€‚

è¿™æ˜¯ä»äººå®¶æ–‡ç« æŒ–çš„å›¾ã€‚æš‚æ—¶å…ˆç”¨ç€ã€‚
<img src="../images/axios.webp" />
è¿™å›¾çªå‡ºäº†å°è£…çš„ä¸¤ä¸ªè¦ç‚¹ï¼šæµç¨‹ + æ‹¦æˆª

#### index.tsä¸»æµç¨‹
```typescript
import axios from "axios"

type ResponseHandle = (data: ResponseData<any>) => unknown

interface RequestData {
  [key: string]: unknown
}

interface ResponseData<T> {
  errno: string
  errmsg: string
  data: T
}

const get = <T,>(url: string, params: RequestData = {}, filter?: ResponseHandle): Promise<[any, ResponseData<T> | undefined]> =>
  new Promise((resolve) => {
    axios
      .get(url, { params })
      .then((result) => {
        let res: ResponseData<T>
        if (filter !== undefined) {
          res = filter(result.data) as unknown as ResponseData<T>
        } else {
          res = result.data as ResponseData<T>
        }
        resolve([null, res as ResponseData<T>])
      })
      .catch((err) => {
        resolve([err, undefined])
      })
  })

  export const post = <T,>(url: string, data: RequestData, params: RequestData = {}): Promise<[any, ResponseData<T> | undefined]> => {
    return new Promise((resolve) => {
      axios
        .post(url, data, { params })
        .then((result) => {
          resolve([null, result.data as ResponseData<T>])
        })
        .catch((err) => {
          resolve([err, undefined])
        })
    })
  }
  
  export const put = <T,>(url: string, data: RequestData, params: RequestData = {}): Promise<[any, ResponseData<T> | undefined]> => {
    return new Promise((resolve) => {
      axios
        .post(url, data, { params })
        .then((result) => {
          resolve([null, result.data as ResponseData<T>])
        })
        .catch((err) => {
          resolve([err, undefined])
        })
    })
  }

  export const del = <T,>(url: string, data: RequestData, params: RequestData = {}): Promise<[any, ResponseData<T> | undefined]> => {
    return new Promise((resolve) => {
      axios
        .post(url, data, { params })
        .then((result) => {
          resolve([null, result.data as ResponseData<T>])
        })
        .catch((err) => {
          resolve([err, undefined])
        })
    })
  }
```
#### é”™è¯¯å¤„ç†
```typescript
const handleNetworkError = (errStatus) => {
    let errMessage = 'æœªçŸ¥é”™è¯¯'
    if (errStatus) {
        switch (errStatus) {
            case 400:
                errMessage = 'é”™è¯¯çš„è¯·æ±‚'
                break
            case 401:
                errMessage = 'æœªæˆæƒï¼Œè¯·é‡æ–°ç™»å½•'
                break
            case 403:
                errMessage = 'æ‹’ç»è®¿é—®'
                break
            case 404:
                errMessage = 'è¯·æ±‚é”™è¯¯,æœªæ‰¾åˆ°è¯¥èµ„æº'
                break
            case 405:
                errMessage = 'è¯·æ±‚æ–¹æ³•æœªå…è®¸'
                break
            case 408:
                errMessage = 'è¯·æ±‚è¶…æ—¶'
                break
            case 500:
                errMessage = 'æœåŠ¡å™¨ç«¯å‡ºé”™'
                break
            case 501:
                errMessage = 'ç½‘ç»œæœªå®ç°'
                break
            case 502:
                errMessage = 'ç½‘ç»œé”™è¯¯'
                break
            case 503:
                errMessage = 'æœåŠ¡ä¸å¯ç”¨'
                break
            case 504:
                errMessage = 'ç½‘ç»œè¶…æ—¶'
                break
            case 505:
                errMessage = 'httpç‰ˆæœ¬ä¸æ”¯æŒè¯¥è¯·æ±‚'
                break
            default:
                errMessage = `å…¶ä»–è¿æ¥é”™è¯¯ --${errStatus}`
        }
    } else {
        errMessage = `æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨ï¼`
    }

    translateError(errMessage)

    return errMessage;
}

const handleAuthError = (errno) => {
	const authErrMap: any = {
	  '10031': 'ç™»å½•å¤±æ•ˆï¼Œéœ€è¦é‡æ–°ç™»å½•', // token å¤±æ•ˆ
	  '10032': 'æ‚¨å¤ªä¹…æ²¡ç™»å½•ï¼Œè¯·é‡æ–°ç™»å½•~', // token è¿‡æœŸ
	  '10033': 'è´¦æˆ·æœªç»‘å®šè§’è‰²ï¼Œè¯·è”ç³»ç®¡ç†å‘˜ç»‘å®šè§’è‰²',
	  '10034': 'è¯¥ç”¨æˆ·æœªæ³¨å†Œï¼Œè¯·è”ç³»ç®¡ç†å‘˜æ³¨å†Œç”¨æˆ·',
	  '10035': 'code æ— æ³•è·å–å¯¹åº”ç¬¬ä¸‰æ–¹å¹³å°ç”¨æˆ·',
	  '10036': 'è¯¥è´¦æˆ·æœªå…³è”å‘˜å·¥ï¼Œè¯·è”ç³»ç®¡ç†å‘˜åšå…³è”',
	  '10037': 'è´¦å·å·²æ— æ•ˆ',
	  '10038': 'è´¦å·æœªæ‰¾åˆ°',
	}
	
    translateError(errno)

	if (authErrMap.hasOwnProperty(errno)) {
        // ç”¨ç»„ä»¶æç¤º
		// message.error(authErrMap[errno])
		// æˆæƒé”™è¯¯ï¼Œç™»å‡ºè´¦æˆ·
		// logout()
		return false
	}

	return true
}

const handleGeneralError = (errno, errmsg) => {
	if (errno !== '0') {
        translateError(errmsg)
        // ç”¨ç»„ä»¶æç¤º
		// meessage.error(err.errmsg)
		return false
	}

	return true
}

const translateError = (msg) => {
    // é€šè¿‡ç»„ä»¶å’Œç¿»è¯‘é€»è¾‘ç»™ç”¨æˆ·çœ‹é”™è¯¯åŸå› 
    console.log(msg)
}

export default {
    handleNetworkError,
    handleAuthError,
    handleGeneralError
}
```
#### è¯·æ±‚æ‹¦æˆªå™¨
```typescript
import axios from "axios"
import handleError from "./handleError"

const handleRequestHeader = (config) => {
    config['secret'] = 'md5'
    return config
}

const handleAuth = (config) => {
    const token = '123'
    config.header['token'] = localStorage.getItem('token') || token || ''
    return config
}

axios.interceptors.request.use((config) => {
    config = handleRequestHeader(config)
    config = handleAuth(config)
    return config
}, (err) => {
     handleError.handleGeneralError(-1, err)
     Promise.reject(err)
})
```
#### å“åº”æ‹¦æˆªå™¨
```typescript
import axios from "axios"
import handleError from "./handleError"

axios.interceptors.response.use(
    (response) => {
        // å“åº”å¤„ç†
        if (response.status !== 200) return Promise.reject(response.data)

        handleError.handleAuthError(response.data.errno)
        handleError.handleGeneralError(response.data.errno, response.data.errmsg)

        return response
    },
    (err) => {
        // å¯¹å“åº”é”™è¯¯åšå¤„ç†
        handleError.handleNetworkError(err.response.status)
        Promise.reject(err.response)
    }
)
```

### postcss
å®ƒæ˜¯ä¸€ä¸ª CSS è¯­æ³•è½¬æ¢å·¥å…·ã€‚
å®‰è£…
```
pnpm install postcss-cli
pnpm install postcss
```
#### æ’ä»¶
##### autoprefixer
è‡ªåŠ¨ç»™å…¼å®¹æ€§å·® çš„å±æ€§å¢åŠ æµè§ˆå™¨å‰ç¼€ï¼Œæé«˜ä»£ç å…¼å®¹æ€§
```js
module.exports = {
    plugins: [
        autoprefixer({
            //å…¼å®¹å¸‚é¢æ‰€æœ‰ç‰ˆæœ¬æµè§ˆå™¨
            browsers: ['> 0% '],
        }),
    ],
};
```
##### postcss-scss
å…è®¸ä½ ä½¿ç”¨ SCSS (ä½†å¹¶æ²¡æœ‰å°† SCSS ç¼–è¯‘åˆ° CSS)ã€‚
```
pnpm install sass sass-loader -D
```
```js
module.exports = {
    syntax: 'postcss',
};
```
##### postcss-px-to-viewport-8-plugin
```
pnpm i postcss-px-to-viewport-8-plugin -D
```
```js
module.exports = {
  plugins: {
    'postcss-px-to-viewport-8-plugin': {
      unitToConvert: 'px', // éœ€è¦è½¬æ¢çš„å•ä½
      viewportWidth: 375, // è§†å£å®½åº¦ï¼Œç­‰åŒäºè®¾è®¡ç¨¿å®½åº¦
      unitPrecision: 5, // ç²¾ç¡®åˆ°å°æ•°ç‚¹åå‡ ä½
      /**
       * å°†ä¼šè¢«è½¬æ¢çš„csså±æ€§åˆ—è¡¨ï¼Œ
       * è®¾ç½®ä¸º * è¡¨ç¤ºå…¨éƒ¨ï¼Œå¦‚ï¼š['*']
       * åœ¨å±æ€§çš„å‰é¢æˆ–åé¢è®¾ç½®*ï¼Œå¦‚ï¼š['*position*']ï¼Œ*position* è¡¨ç¤ºæ‰€æœ‰åŒ…å« position çš„å±æ€§ï¼Œå¦‚ background-position-y
       * è®¾ç½®ä¸º !xx è¡¨ç¤ºä¸åŒ¹é…xxçš„é‚£äº›å±æ€§ï¼Œå¦‚ï¼š['!letter-spacing'] è¡¨ç¤ºé™¤äº†letter-spacing å±æ€§ä¹‹å¤–çš„å…¶ä»–å±æ€§
       * è¿˜å¯ä»¥åŒæ—¶ä½¿ç”¨ ! å’Œ * ï¼Œå¦‚['!font*'] è¡¨ç¤ºé™¤äº†font-sizeã€ font-weight ...è¿™äº›ä¹‹å¤–å±æ€§ä¹‹å¤–çš„å…¶ä»–å±æ€§åå¤´éƒ¨æ˜¯â€˜fontâ€™çš„å±æ€§
       * */
      propList: ['*'],
      viewportUnit: 'vw', // éœ€è¦è½¬æ¢æˆä¸ºçš„å•ä½
      fontViewportUnit: 'vw', // éœ€è¦è½¬æ¢ç§°ä¸ºçš„å­—ä½“å•ä½
      /**
       * éœ€è¦å¿½ç•¥çš„é€‰æ‹©å™¨ï¼Œå³è¿™äº›é€‰æ‹©å™¨å¯¹åº”çš„å±æ€§å€¼ä¸åšå•ä½è½¬æ¢
       * è®¾ç½®ä¸ºå­—ç¬¦ä¸²ï¼Œè½¬æ¢å™¨åœ¨åšè½¬æ¢æ—¶ä¼šå¿½ç•¥é‚£äº›é€‰æ‹©å™¨ä¸­åŒ…å«è¯¥å­—ç¬¦ä¸²çš„é€‰æ‹©å™¨ï¼Œå¦‚ï¼š['body']ä¼šåŒ¹é…åˆ° .body-classï¼Œä¹Ÿå°±æ„å‘³ç€.body-classå¯¹åº”çš„æ ·å¼è®¾ç½®ä¸ä¼šè¢«è½¬æ¢
       * è®¾ç½®ä¸ºæ­£åˆ™è¡¨è¾¾å¼ï¼Œåœ¨åšè½¬æ¢å‰ä¼šå…ˆæ ¡éªŒé€‰æ‹©å™¨æ˜¯å¦åŒ¹é…è¯¥æ­£åˆ™ï¼Œå¦‚æœåŒ¹é…ï¼Œåˆ™ä¸è¿›è¡Œè½¬æ¢ï¼Œå¦‚[/^body$/]ä¼šåŒ¹é…åˆ° body ä½†æ˜¯ä¸ä¼šåŒ¹é…åˆ° .body
       */
      selectorBlackList: [],
      minPixelValue: 1, // æœ€å°çš„åƒç´ å•ä½å€¼
      mediaQuery: false, // æ˜¯å¦è½¬æ¢åª’ä½“æŸ¥è¯¢ä¸­è®¾ç½®çš„å±æ€§å€¼
      replace: true, // æ›¿æ¢åŒ…å«vwçš„è§„åˆ™ï¼Œè€Œä¸æ˜¯æ·»åŠ å›é€€
      /**
       * å¿½ç•¥ä¸€äº›æ–‡ä»¶ï¼Œå¦‚'node_modules'
       * è®¾ç½®ä¸ºæ­£åˆ™è¡¨è¾¾å¼ï¼Œå°†ä¼šå¿½ç•¥åŒ¹é…è¯¥æ­£åˆ™çš„æ‰€æœ‰æ–‡ä»¶
       * å¦‚æœè®¾ç½®ä¸ºæ•°ç»„ï¼Œé‚£ä¹ˆè¯¥æ•°ç»„å†…çš„å…ƒç´ éƒ½å¿…é¡»æ˜¯æ­£åˆ™è¡¨è¾¾å¼
       */
      exclude: [],
      landscape: false, // æ˜¯å¦è‡ªåŠ¨åŠ å…¥ @media (orientation: landscape)ï¼Œå…¶ä¸­çš„å±æ€§å€¼æ˜¯é€šè¿‡æ¨ªå±å®½åº¦æ¥è½¬æ¢çš„
      landscapeUnit: 'vw', // æ¨ªå±å•ä½
      landscapeWidth: 1334, // æ¨ªå±å®½åº¦
    },
  },
};
```
## ç¯å¢ƒé…ç½®
åœ¨æ ¹ç›®å½•æ–°å»º.env.test, .env.development, .env.production
```
//.env.production
NODE_ENV = 'production'
VUE_APP_MODE = 'production'
VUE_APP_API_URL = 'http://xxx.xxx.xxx.xx:8008/api/'
```

```
//.env.development
NODE_ENV = 'development'  //æ¨¡å¼
VUE_APP_MODE = 'development'  //é€šè¿‡"VUE_APP_MODE"å˜é‡æ¥åŒºåˆ†ç¯å¢ƒ
VUE_APP_API_URL = 'http://192.****:8008/api/' //apiåœ°å€
```
```
//.env.test
NODE_ENV = 'production'
VUE_APP_MODE = 'test'
VUE_APP_API_URL = 'http://xxx.xxx.xxx.xx:8008/api/'
outputDir = test
```

## ä¸šåŠ¡ï¼ˆmock.jsï¼‰

è™šæ‹Ÿæ•°æ®ä»£æ›¿æ¥å£

```
npm install mockjs
```