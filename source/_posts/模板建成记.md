---
title: 模板建成记
date: 2022-11-16 00:02:40
tags:
---

讲个笑话：我以前以为模板就是框架

# 模板

简单点说，就是开发的时候一大堆工具的集成体，相当于工具箱咯！

好啦！等我地哩组装自己的工具箱啦！

## init a project
选个pnpm做包管理啦梗系！因为一阵要用vue所以选vite做打包工具
```
pnpm create vite
// 然后跟着指引选vue，typescript

// 框架被建出来之后你会获得一个由vue和typescript建成的最初模板（干净的一笔）
pnpm i
pnpm dev
// 出来一个vue的模板页面
```

## 集成（presets/presets.ts）
### 保证vue的运行(支持vue模板的识别与编译)
```
pnpm add @vitejs/plugin-vue @vitejs/plugin-vue-jsx -D
```
```
import vue from '@vitejs/plugin-vue';
import vueJsx from '@vitejs/plugin-vue-jsx';

export default [
    vue(),
    vueJsx(),
]
```
### add css
原子化css unocss
```
pnpm add unocss -D
```

```
// presets/presets.ts
import Unocss from 'unocss/vite'

export default [
    Unocss(),
]
```

```
// main.ts
import 'uno.css'
```
### 自动引入插件
```
pnpm add unplugin-auto-import -D
```
```
import AutoImport from 'unplugin-auto-import/vite';

export default [
    AutoImport({
        include: [ // 扫描范围
            /\.[tj]sx?$/, // .ts, .tsx, .js, .jsx
            /\.vue$/, /\.vue\?vue/, // .vue
            /\.md$/, // .md
        ],
        imports: [ // 你需要自动引入什么插件
            'vue'
        ],
        dts: './src/types/auto-imports.d.ts', // 要生成相应的类，不然过不了ts
    })
]
```
### 自动引入组件
```
npm install unplugin-vue-components -D
npm install vite-plugin-style-import -D
```
```
import Components from 'unplugin-vue-components/vite';
import { VantResolver, NaiveUiResolver } from 'unplugin-vue-components/resolvers';
import {
  createStyleImportPlugin,
  VantResolve
} from 'vite-plugin-style-import'


export default [
    Components({
        dirs: ['src/components/'], // 我地滴组件肯定写启哩到葛嘛
        extensions: ['vue'], //  // 组件的有效文件扩展名
        include:[/\.vue$/, /\.vue\?vue/], // 扫描范围
        resolvers: [
            VantResolver(), // 移动ui库
            NaiveUiResolver(), // PC端UI库
        ], // ui库解析器
        dts: './src/types/components.d.ts', // 要生成相应的类，不然过不了ts，在src下建types文件夹
    }),
    createStyleImportPlugin({
      resolves: [
        VantResolve()
      ],
    }),
]
```

### 图标库
```
pnpm add -D @iconify/json
```
```
import Icons from 'unplugin-icons/vite'
import IconsResolver from 'unplugin-icons/resolver'
import { FileSystemIconLoader } from 'unplugin-icons/loaders';

export default [
    Components({
        resolvers: [
            IconsResolver({ customCollections: ['custom'] }),
        ]
    }),
    Icons({
        compiler: 'vue3', // 适应vue3依赖
        customCollections: {
          custom: FileSystemIconLoader('./assets/svg'), // 自定义目录
        },
        autoInstall: true, // 自动安装
    }),
]
```
```
  <i-mdi-account-box />
  <i-mdi-alarm-off />
```

### 字体库
```
pnpm add vite-plugin-fonts -D
```

```
import ViteFonts from 'vite-plugin-fonts';

export default [
    ViteFonts({
      google: {
        families: ['Open Sans', 'Montserrat', 'Fira Sans'],
      },
    }),
]
```

### 国际化
```
pnpm add @intlify/vite-plugin-vue-i18n -D
```

```
import VueI18n from '@intlify/vite-plugin-vue-i18n';

export default [
    VueI18n({
        include: ['../src/locales/'], // 翻译目录,在src下新建locales文件夹
    }),
]
```

```
// main.ts
import { createI18n } from 'vue-i18n'

import en from './locales/en.json'
import zh from './locales/zh-CN.json'

const i18n = createI18n({
    locale: 'zh',
    messages: {
      en,
      zh
    }
})

app.use(i18n)
```
```
{
  "language": "English"
}
```
```
{
  "language": "中文"
}
```
```
 <div>{{ $t('language') }}</div>
```